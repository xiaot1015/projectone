<style>
.center{
  float:left;
  margin: 15px;
}
</style>
<div class="right">
  <div style="height:500px;width:900px;margin-left:290px;">
      <div id="manlist" style="height:100%;width:100%;overflow-x:hidden;overflow-y:hidden;">
      <!-- PAGE CONTENT BEGINS -->
      <foreach name="vmlist" item="vm" key="k">
      <div class="center" style="height:200px;width:240px;margin-top:30px;">

        <div class=""><button>{$teamlist[$vm]}</button></div>
        <div>
          <iframe src="{$vmlisturl[$vm]}" alt="图片" width="80%" height="100%"/></iframe>
        </div>
        <div class=""></div>
        <div class="">
          <button  onclick="startvm('{$vm}')">启动{$k}</button>
          <button  onclick="shutdownvm('{$vm}')">关闭{$k}</button>
          <button  onclick="recovervm('{$vm}')">恢复{$k}</button>
          <button  onclick="openWin('{$vmlisturl[$vm]}')">打开{$k}</button>
        </div>
      </div>
      </foreach>
      <!-- /.message-content -->
      </div>
     <button class="btn" onclick="next()">下移</button>
     <button class="btn" onclick="up()">上移</button>
    </div><!-- /.col -->
</div>

<script type="text/javascript">
    var scrollup = 0;
  var divheight = 200;
  function openWin(url){
      if(url == ""){
          return false;
      }    
      window.open(url);
  }
  function up(){
      var i = 6;
      while(i>0){
      var obj = $("#manlist");
          obj.find(".center").last().clone().prependTo(obj);
          obj.find(".center").last().remove();
          i--; 
      }
      scrollup = scrollup + divheight;
      obj.animate({top:scrollup},1000,function(){
              scrollup = parseInt(obj.css("top"));
          });
  }
  function next(){
      var i = 6;
      while(i>0){
      var obj = $("#manlist");
          obj.find(".center").first().clone().appendTo(obj);
          obj.find(".center").first().remove();
          i--; 
      }
      scrollup = scrollup - divheight;
      obj.animate({top:scrollup},1000,function(){
              scrollup = parseInt(obj.css("top"));
          });
      
  }

  function startvm(vm){

    if(vm == ""){
      return false;
    }
    var url = "{:U('Targetcompaign/startvirt')}";
    $.post(url,{id:vm},function(data){
      if(data.status == 1){
        alert("操作成功");
        window.location.reload();
      }else{
        alert("操作失败");
      }
    });
  }
  function shutdownvm(vm){
    if(vm == ""){
      return false;
    }
    var url = "{:U('Targetcompaign/shutdownvirt')}";
    $.post(url,{id:vm},function(data){
      if(data.status == 1){
        alert("操作成功");
      }else{
        alert("操作失败");
      }
    }); 
  }
  function recovervm(vm){
    if(vm == ""){
      return false;
    }
    var url = "{:U('Targetcompaign/recovervirt')}";
    $.post(url,{id:vm},function(data){
      if(data.status == 1){
        alert("操作成功");
      }else{
        alert("操作失败");
      }
    });
  }

</script>>
